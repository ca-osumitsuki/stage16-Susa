controller.right.onEvent(ControllerButtonEvent.Pressed, function () {
    mySprite.setImage(assets.image`いぬたぬき_右`)
})
scene.onOverlapTile(SpriteKind.Player, assets.tile`ダイヤモンド`, function (sprite, location) {
    tiles.setTileAt(location, assets.tile`transparency16`)
    info.changeScoreBy(1)
    music.play(music.melodyPlayable(music.wawawawaa), music.PlaybackMode.InBackground)
    music.setVolume(255)
})
scene.onOverlapTile(SpriteKind.Player, assets.tile`アイテムブロック3`, function (sprite, location) {
    tiles.setTileAt(tiles.getTileLocation(7, 10), assets.tile`transparency16`)
    get_item(7, 10)
})
controller.left.onEvent(ControllerButtonEvent.Pressed, function () {
    mySprite.setImage(assets.image`いぬたぬき_左`)
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Projectile, function (sprite, otherSprite) {
    damage()
})
scene.onOverlapTile(SpriteKind.Player, assets.tile`チェスト_開いてない`, function (sprite, location) {
    stage += 1
    init_stage(stage)
})
controller.anyButton.onEvent(ControllerButtonEvent.Pressed, function () {
    if (mySprite.tileKindAt(TileDirection.Left, assets.tile`ブロック2`)) {
        mySprite.top = -150
    }
})
controller.B.onEvent(ControllerButtonEvent.Pressed, function () {
    if (mySprite.tileKindAt(TileDirection.Right, assets.tile`ブロック2`)) {
        mySprite.top = -150
    }
})
function get_item (column: number, row: number) {
    mySprite2 = sprites.create(assets.image`きのこ`, SpriteKind.Food)
    tiles.placeOnTile(mySprite2, tiles.getTileLocation(column, row))
    mySprite.vy = -100
    mySprite2.setFlag(SpriteFlag.AutoDestroy, true)
    info.changeLifeBy(1)
}
scene.onOverlapTile(SpriteKind.Player, assets.tile`きのこタイル1`, function (sprite, location) {
    tiles.setTileAt(tiles.getTileLocation(20, 12), assets.tile`transparency16`)
    pause(10000)
    info.changeLifeBy(-100)
})
function init_stage (stage: number) {
    if (stage == 0) {
        tiles.setCurrentTilemap(tilemap`レベル_1`)
        tiles.placeOnTile(mySprite, tiles.getTileLocation(3, 10))
        scene.setBackgroundColor(9)
        scene.setBackgroundImage(assets.image`背景`)
    } else if (stage == 1) {
        tiles.setCurrentTilemap(tilemap`レベル_2`)
        tiles.placeOnTile(mySprite, tiles.getTileLocation(3, 10))
        scene.setBackgroundColor(9)
        scene.setBackgroundImage(assets.image`背景`)
    } else if (stage == 2) {
        tiles.setCurrentTilemap(tilemap`レベル_3`)
        tiles.placeOnTile(mySprite, tiles.getTileLocation(3, 10))
        scene.setBackgroundColor(9)
        scene.setBackgroundImage(assets.image`背景`)
    } else if (stage == 3) {
        tiles.setCurrentTilemap(tilemap`レベル_4`)
        tiles.placeOnTile(mySprite, tiles.getTileLocation(3, 10))
        scene.setBackgroundColor(15)
        scene.setBackgroundImage(img`
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            `)
    } else if (stage == 4) {
        j = 6
        tiles.setCurrentTilemap(tilemap`レベル_5`)
        tiles.placeOnTile(mySprite, tiles.getTileLocation(3, 10))
        scene.setBackgroundImage(img`
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ........................................................fffffffffffffffff.......................................................................................
            .....................................................fff88888888888888888fff....................................................................................
            ..................................................fff88888888888888888888888fff.................................................................................
            ................................................ff8888888888888ffffff8888888888ff...............................................................................
            ..............................................ff88888888888fffff11111ffff88888888ff.............................................................................
            .............................................f888888888888ff1111111111111ff88888888f............................................................................
            ...........................................ff8888888888fff11111111111111111fff888888ff..........................................................................
            ..........................................f88888888888f11111111111111111111111f8888888f.........................................................................
            .........................................f888888888fff1111111111111111111111111fff88888f........................................................................
            ........................................f88888888fff11111111111111111111111111111ff88888f.......................................................................
            .......................................f88888888f111111111111111111111111111111111ff88888f......................................................................
            ......................................f8888888fff1111111111111111111111111111111111ff88888f.....................................................................
            .....................................f88888888f11111111ffffffffff1111ffffffffffff111f888888f....................................................................
            ....................................f8888888ff1111111ffffffffffff11fffffffffffffff11f8888888f...................................................................
            ....................................f888888ff111111fffffffffffffffffffffffffffffff111f888888f...................................................................
            ...................................f8888888f11111fffffffff1111fffffffff11111111ffff11f8888888f..................................................................
            ..................................f88888888f1111fffffff1111111fffffff1111111111ffff111f8888888f.................................................................
            ..................................f8888888f11111ffffff111111111fffff111111111111ffff11f8888888f.................................................................
            .................................f88888888f11111ffff11111111111fffff111111111111ffff111f8888888f................................................................
            .................................f8888888f111111fff1111111122222fff22222111111111fff111f8888888f................................................................
            ................................f88888888f111111fff1111111122222fff22222111111111ffff11f88888888f...............................................................
            ................................f88888888f111111fff1111111122222fff22222111111111ffff111f8888888f...............................................................
            ................................f88888888f111111fff1111111122222fff222221111111111fff111f8888888f...............................................................
            ...............................f88888888f1111111fff1111111122222fff222221111111111fff111f88888888f..............................................................
            ...............................f8888888f11111111fff1111111122222fff22222111111111ffff1111f8888888f..............................................................
            ...............................f8888888f11111111fff1111111122222fff22222111111111ffff1111f8888888f..............................................................
            ..............................f8888888f111111111ffff111111111111fff11111111111111ffff1111f88888888f.............................................................
            ..............................f8888888f111111111ffff11111111111ffff1111111111111ffff111111f8888888f.............................................................
            ..............................f8888888f111111111ffffff11111111fffff1111111111111ffff111111f8888888f.............................................................
            ..............................f8888888f1111111111fffff1111111fffffff11111111111fffff1111111f888888f.............................................................
            ..............................f8888888f1111111111ffffff111111fffffffff11111111fffff11111111f888888f.............................................................
            ..............................f8888888f111111111111ffffffffffffffffffffffffffffffff11111111ff88888f.............................................................
            ..............................f8888888f1111111111111ffffffffffff.fffffffffffffffff1111111111f88888f.............................................................
            ..............................f8888888f1111111111111fffffffffff..ffffffffffffffff11111111111ff8888f.............................................................
            ..............................f8888888f1111111111111111111fffff...ffff11111111111111111111111f8888f.............................................................
            ..............................f8888888f1111111111111111111ffff.....fff11111111111111111111111f8888f.............................................................
            ..............................f8888888f1111111111111111111ffff....ffff11111111111111111111111f8888f...............11111111......................................
            ..............................f8888888f1111111111111111111ffffffffffff111111111111111111111111f888f.............1111111111111...................................
            ..............................f8888888f1111111111111111111ffffffffffff111111111111111111111111f888f............11111111111111...................................
            ..............................f8888888f11111111111111111111ffffffffff1111111111111111111111111f888f...........111111111111111...................................
            ..............................f8888888f111111111111111111111111fff1111111111111111111111111111f888f..........1111111111111111...................................
            ..............................f8888888f111111111111111111111111fff1111111111111111111111111111f888f..........1111111111111111...................................
            ..............................f8888888f1111111111ffff1111111111fff1111111111111111111111111111f888f..........1111111111111111...................................
            ...............................f888888f11111111fffffffff1111111fff11111111111ffffffff111111111f88f...........1111111111111111...................................
            ...............................f888888f11111111ffffffffffff1111fff1111111fffffffffffff11111111f88f...........1111111111111111...................................
            ...............................f888888f11111111fff1fffffffff221fff1111ff2ffffffffffffff1111111f88f...........1111111111111111...................................
            ................................f88888ff1111111fff1111ffffff222fffffffff22fffff111fffff1111111f8f............1111111111111111...................................
            ................................f888888f1111111fff1111111ff2222ffffffff222f111111111fff1111111f8f............1111111111111111...................................
            ................................f888888f1111111fff1111111112222ffffffff222211111111ffff111111f88f............1111111111111111...................................
            .................................f88888f1111111ffff111111112222fffff111222211111111ffff111111f8f.............1111111111111111...................................
            .................................f88888f1111111ffff1111111122221111111122221111111fffff111111f8f.............1111111111111111...................................
            ..................................f8888f1111111fffff11111112222111111112222111111fffff111111fff..............1111111111111111...................................
            ..................................f8888f11111111fffff11111122221111111122221111111ffff111111f8f..............1111111111111111...................................
            ...................................f888f11111111ffffffff11122221111111122221111111fff111111f8f..............11111111111111111...................................
            ....................................f88ff11111111ffffffffff22211111111122221f11111f11111111ff...............11111111111111111...................................
            ....................................f888f1111111111ffffffff222ff111111122222f111111111111ff8f...............11111111111111111...................................
            .....................................f88f1111111111111ffffffffffffffff22222ff11111111111f88f................11111111111111111..11111111.........................
            ......................................f88f111111111111111fffffffffffffffffff11111111111ff8f...........11111111111111111111111.1111111111........................
            .......................................ffff1111111111111111111fffffffffffff11111111111ff8f.........1111111111111111111111111111111111111........................
            ........................................fff111111111111111111111111111111111111111111ff8f.........11111111111111111111111111111111111111........................
            .........................................fff1111111111111111111111111111111111111111ff8f.........111111111111111111111111111111111111111.11111111...............
            .........................................fff1111111111111111111111111111111111111111f8f.........1111111111111111111111111111111111111111111111111...............
            ..........................................ffff1111111111111111111111111111111111111fff..........1111111111111111111111111111111111111111111111111...............
            .............................................fffffffffffffffffffffffffffffffffffffff............11111111111111111111111111111111111111111111111111..............
            ................................................................................................11111111111111111111111111111111111111111111111111..............
            ................................................................................................11111111111111111111111111111111111111111111111111..............
            ...............................................................................................111111111111111111111111111111111111111111111111111..............
            ........................................................................................11111111111111111111111111111111111111111111111111111111111.............
            .......................................................................................111111111111111111111111111111111111111111111111111111111111.............
            .......................................................................................111111111111111111111111111111111111111111111111111111111111.............
            .......................................................................................111111111111111111111111111111111111111111111111111111111111.............
            .......................................................................................111111111111111111111111111111111111111111111111111111111111.............
            .......................................................................................111111111111111111111111111111111111111111111111111111111111.............
            .......................................................................................11111111111111111111111111111111111111111111111111111111111..............
            .......................................................................................11111111111111111111111111111111111111111111111111111111.................
            .......................................................................................111111111111111111111111111111111111111111111111111......................
            .......................................................................................111111111111111111111111111111111111111111111111111......................
            .......................................................................................111111111111111111111111111111111111111111111111111......................
            .......................................................................................111111111111111111111111111111111111111111111111111......................
            ........................................................................................11111111111111111111111111111111111111111111111111......................
            .........................................................................................111111111111111111111111111111111111111111111111.......................
            ...........................................................................................1111111111.....1111111111111111111111111111111.......................
            .........................................................................................................11111111111111111111111111111111.......................
            .........................................................................................................11111111111111111111111111111111.......................
            .........................................................................................................11111111111111111111111111111111.......................
            .........................................................................................................11111111111111111111111111111111.......................
            .........................................................................................................11111111111111111111111111111111.......................
            .........................................................................................................11111111111111111111111111111111.......................
            .........................................................................................................11111111111111111111111111111111.......................
            ........................................................................................................111111111111111111111111111111111.......................
            ........................................................................................................111111111111111111111111111111111.......................
            ........................................................................................................11111111111111111111111111111111........................
            ........................................................................................................1111111111111111111111111111111.........................
            ........................................................................................................1111111111111111111111111111111.........................
            ........................................................................................................1111111111111111111111111111111.........................
            ........................................................................................................1111111111111111111111111111111.........................
            ........................................................................................................1111111111111111111111111111111.........................
            ........................................................................................................1111111111111111111111111111111.........................
            ........................................................................................................1111111111111111111111111111111.........................
            ........................................................................................................1111111111111111111111111111111.........................
            ........................................................................................................1111111111111111111111111111111.........................
            ........................................................................................................111111111111111111111111111111..........................
            ........................................................................................................11111111111111111111111111111...........................
            .............................................................................................................................11111111...........................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            `)
    } else if (stage == 5) {
        scene.cameraFollowSprite(mySprite)
        tiles.setCurrentTilemap(tilemap`レベル_6`)
        tiles.placeOnTile(mySprite, tiles.getTileLocation(3, 10))
        scene.setBackgroundColor(9)
        scene.setBackgroundImage(assets.image`背景`)
    } else if (stage == 6) {
        tiles.setCurrentTilemap(tilemap`レベル_7`)
        tiles.placeOnTile(mySprite, tiles.getTileLocation(3, 10))
        scene.setBackgroundColor(12)
        scene.setBackgroundImage(img`
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            `)
        tiles.placeOnTile(mySprite, tiles.getTileLocation(3, 10))
        sprites.destroy(mySprite3)
        mySprite3 = sprites.create(assets.image`TNT`, SpriteKind.Enemy)
        tiles.placeOnTile(mySprite3, tiles.getTileLocation(15, 11))
        mySprite3.ay = 500
        boss_move = 0
    }
}
function damage () {
    info.changeLifeBy(-1)
    mySprite.startEffect(effects.fire)
    scene.centerCameraAt(scene.cameraProperty(CameraProperty.X), scene.cameraProperty(CameraProperty.Y))
    mySprite.vy = -150
    music.setVolume(120)
    music.play(music.melodyPlayable(music.jumpDown), music.PlaybackMode.InBackground)
    controller.moveSprite(mySprite, 0, 0)
    pause(2000)
    controller.moveSprite(mySprite, 100, 0)
    scene.cameraFollowSprite(mySprite)
    effects.clearParticles(mySprite)
    init_stage(stage)
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.Enemy, function (sprite, otherSprite) {
    damage()
})
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    if (mySprite.isHittingTile(CollisionDirection.Bottom)) {
        mySprite.vy = -300
    }
})
let projectile: Sprite = null
let i = 0
let boss_move = 0
let mySprite3: Sprite = null
let j = 0
let mySprite2: Sprite = null
let mySprite: Sprite = null
let stage = 0
stage = 4
info.setScore(0)
info.setLife(3)
stage = 6
mySprite = sprites.create(assets.image`いぬたぬき_右`, SpriteKind.Player)
controller.moveSprite(mySprite, 100, 0)
scene.cameraFollowSprite(mySprite)
mySprite.ay = 500
init_stage(stage)
game.onUpdate(function () {
    if (mySprite.tileKindAt(TileDirection.Bottom, assets.tile`ボタン_押されてない`)) {
        tiles.setTileAt(tiles.getTileLocation(6, 12), assets.tile`ボタン_押された`)
        i = 7
        for (let index = 0; index < 10; index++) {
            tiles.setTileAt(tiles.getTileLocation(i, 13), assets.tile`ブロック0`)
            tiles.setWallAt(tiles.getTileLocation(i, 13), true)
        }
    }
})
game.onUpdate(function () {
    if (mySprite.tileKindAt(TileDirection.Bottom, assets.tile`ボタン_押されてない`)) {
        tiles.setTileAt(tiles.getTileLocation(6, 12), assets.tile`ボタン_押された`)
        i = 7
        for (let index = 0; index < 9; index++) {
            tiles.setTileAt(tiles.getTileLocation(i, 13), assets.tile`ブロック0`)
            tiles.setWallAt(tiles.getTileLocation(i, 13), true)
            i += 1
        }
    }
})
game.onUpdate(function () {
    if (stage == 4) {
        scene.centerCameraAt(mySprite.x, Math.constrain(mySprite.y, 160, 1000))
    }
})
game.onUpdate(function () {
    if (mySprite.tileKindAt(TileDirection.Bottom, assets.tile`バネ`)) {
        mySprite.vy = -300
    }
})
game.onUpdate(function () {
    if (mySprite.tileKindAt(TileDirection.Top, assets.tile`アイテムブロック1`)) {
        tiles.setTileAt(tiles.getTileLocation(4, 10), assets.tile`アイテムブロック2`)
        get_item(4, 10)
    }
})
game.onUpdate(function () {
    if (mySprite.tileKindAt(TileDirection.Top, assets.tile`アイテムブロック4`) && mySprite.vy < 0) {
        tiles.setTileAt(tiles.getTileLocation(17, 10), assets.tile`アイテムブロック2`)
        tiles.setWallAt(tiles.getTileLocation(17, 10), true)
        get_item(17, 10)
    }
})
game.onUpdateInterval(0.01, function () {
    if (stage == 6) {
        projectile = sprites.createProjectileFromSprite(img`
            . . 2 2 b b b b b . . . . . . . 
            . 2 b 4 4 4 4 4 4 b . . . . . . 
            2 2 4 4 4 4 d d 4 4 b . . . . . 
            2 b 4 4 4 4 4 4 d 4 b . . . . . 
            2 b 4 4 4 4 4 4 4 d 4 b . . . . 
            2 b 4 4 4 4 4 4 4 4 4 b . . . . 
            2 b 4 4 4 4 4 4 4 4 4 e . . . . 
            2 2 b 4 4 4 4 4 4 4 b e . . . . 
            . 2 b b b 4 4 4 b b b e . . . . 
            . . e b b b b b b b e e . . . . 
            . . . e e b 4 4 b e e e b . . . 
            . . . . . e e e e e e b d b b . 
            . . . . . . . . . . . b 1 1 1 b 
            . . . . . . . . . . . c 1 d d b 
            . . . . . . . . . . . c 1 b c . 
            . . . . . . . . . . . . c c . . 
            `, mySprite3, randint(-50, 0), randint(-50, 0))
    }
})
forever(function () {
    if (mySprite.tilemapLocation().row >= 15) {
        damage()
    }
})
forever(function () {
    if (mySprite.tileKindAt(TileDirection.Bottom, assets.tile`トゲ1`)) {
        damage()
    }
})
forever(function () {
    if (mySprite.tileKindAt(TileDirection.Top, assets.tile`トゲ0`)) {
        damage()
    }
})
forever(function () {
    if (stage == 4) {
        tiles.setTileAt(tiles.getTileLocation(j, 13), assets.tile`ブロック1`)
        tiles.setWallAt(tiles.getTileLocation(j, 13), true)
        tiles.setTileAt(tiles.getTileLocation(j + 1, 13), assets.tile`ブロック1`)
        tiles.setWallAt(tiles.getTileLocation(j + 1, 13), true)
        pause(1000)
        tiles.setTileAt(tiles.getTileLocation(j, 13), assets.tile`transparency16`)
        tiles.setWallAt(tiles.getTileLocation(j, 13), false)
        j += 1
        if (j == 15) {
            j = 6
        }
    }
})
game.onUpdateInterval(500, function () {
    if (stage == 6) {
        if (boss_move == 0) {
            boss_move = 1
            mySprite3.vx = -100
        } else {
            boss_move = 0
            mySprite3.vx = 100
        }
    }
})
